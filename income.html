<!DOCTYPE html>
<html>
    <head>
        <title>income calculator</title>
        <script src="scripts/util.js"></script>
    </head>
    <body>
        <div>
            <span id="Error"></span>
        </div>
        <div>
            <label for="HourlyGross">Hourly Pay Rate</label>
            <input id="HourlyGross" type="text", value="0" />
        </div>
        <div>
            <label for="WeeklyHours">Hours per week</label>
            <input id="WeeklyHours" type="range" min="0" max="168" step="0.25" value="40" />
            <span id="WeeklyHoursValue">35</span>
        </div>
        <div>
            <label for="MonthlyGross">Monthly Gross</label>
            <input id="MonthlyGross" type="text" value="0" />
        </div>
        <div>
            <label for="YearlyGross">Yearly Gross</label>
            <input id="YearlyGross" type="text" value="0" />
        </div>
        
        <script>
            const errorNode = getNode("Error");
            const yearlyGrossNode = getNode("YearlyGross")
            const monthlyGrossNode = getNode("MonthlyGross")
            const hourlyGrossNode = getNode("HourlyGross")

            getNode("WeeklyHours").addEventListener('input', (node) => {
                setElementInnerHtmlById("WeeklyHoursValue", node.target.value)
                calculateHourly();
            })
            
            getNode("HourlyGross").addEventListener('input', (node) => {
                validateNodeIsNumber(node, calculateHourly, resetForm);
            })

            getNode("MonthlyGross").addEventListener('input', (node) => {
                validateNodeIsNumber(node, calculateMonthly, resetForm);
            })

            getNode("YearlyGross").addEventListener('input', (node) => {
                validateNodeIsNumber(node, calculateYearly, resetForm);
            })



            const calculateYearly = function() {
                let yearlyGross = getFloatFromElementId("YearlyGross")
                let weeklyHours = getFloatFromElementId("WeeklyHours")

                let monthlyGross = yearlyGross / 12
                let hourlyGross = (yearlyGross / 52) / weeklyHours

                setElementValueById("MonthlyGross", monthlyGross)
                setElementValueById("HourlyGross", hourlyGross)
            }

            const calculateMonthly = function() {
                let monthlyGross = getFloatFromElementId("MonthlyGross")
                let weeklyHours = getFloatFromElementId("WeeklyHours")

                let yearlyGross = monthlyGross * 12
                let hourlyGross = (yearlyGross / 52) / weeklyHours

                setElementValueById("YearlyGross", yearlyGross)
                setElementValueById("HourlyGross", hourlyGross)
            }

            const calculateHourly = function() {
                let weeklyHours = getFloatFromElementId("WeeklyHours");
                let hourlyRate = getFloatFromElementId("HourlyGross");

                let yearlyGross = (weeklyHours * hourlyRate) * 52;
                let monthlyGross = yearlyGross / 12;

                setElementValueById("MonthlyGross", monthlyGross)
                setElementValueById("YearlyGross", yearlyGross)
            }

            const resetForm = function() {
                setElementValueById("HourlyGross", "0")
                setElementValueById("MonthlyGross", "0")
                setElementValueById("YearlyGross", "0")
            }
        </script>
    </body>
</html>