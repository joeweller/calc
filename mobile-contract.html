<!DOCTYPE html>
<html>
    <head>
        <title>mobile contract calculator</title>
        <script src="scripts/util.js"></script>
    </head>
    <body>
        <div>
            <span id="Error"></span>
        </div>
        <div>
            <label for="HandsetRRP">Handset RRP</label>
            <input id="HandsetRRP" type="text", value="0" />
        </div>
        <div>
            <label for="ContractLength">Contract Length <span id="ContractLengthValue">0</span></label>
            <input id="ContractLength" type="range" min="0" max="36" step="6" value="0" />
        </div>
        <div>
            <label for="ContractMonthly">Contract Monthly Price</label>
            <input id="ContractMonthly" type="text", value="0" />
        </div>
        <div>
            <label for="HandsetUpFront">Handset Upfront (optional)</label>
            <input id="HandsetUpFront" type="text", value="0" />
        </div>
        <hr>
        <div>
            <label for="HandsetTotal">Handset Total</label>
            <input id="HandsetTotal" type="text" value="0" readonly />
        </div>
        <div>
            <label for="ContractTotal">Contract Total</label>
            <input id="ContractTotal" type="text" value="0" readonly />
        </div>
        <div>
            <label for="PlanTotal">Plan Total (minus handset total)</label>
            <input id="PlanTotal" type="text" value="0" readonly />
        </div>
        <div>
            <label for="HandsetMonthly">Handset Monthly</label>
            <input id="HandsetMonthly" type="text" value="0" readonly />
        </div>
        <div>
            <label for="PlanMonthly">Plan Monthly</label>
            <input id="PlanMonthly" type="text" value="0" readonly />
        </div>
        <script>
            
            document.getElementById("ContractLength").addEventListener('input', (node) => {
                setElementInnerHtmlById('ContractLengthValue', node.target.value)
                calculateResult();
            })
            
            document.getElementById("HandsetRRP").addEventListener('input', () => {
                calculateResult();
            })

            document.getElementById("ContractMonthly").addEventListener('input', () => {
                calculateResult();
            })

            document.getElementById("HandsetUpFront").addEventListener('input', () => {
                calculateResult();
            })

            const calculateResult = function() {
                let handsetRRP = getFloatFromElementId("HandsetRRP")
                let contractLength = getIntFromElementId("ContractLength")
                let contractMonthlyCost = getFloatFromElementId("ContractMonthly")
                let handsetUpFront = getFloatFromElementId("HandsetUpFront")

                let handsetTotal = handsetRRP - handsetUpFront
                let contractTotal = contractLength * contractMonthlyCost;
                let planTotal = contractTotal - handsetTotal;
                let planMonthly = planTotal / contractLength;
                let handsetMonthly = handsetTotal / contractLength;

                setElementValueById("HandsetTotal", handsetTotal.toFixed(2))
                setElementValueById("ContractTotal", contractTotal.toFixed(2))
                setElementValueById("PlanTotal", planTotal.toFixed(2))
                setElementValueById("PlanMonthly", planMonthly.toFixed(2))
                setElementValueById("HandsetMonthly", handsetMonthly.toFixed(2))
            }
            
        </script>
    </body>
</html>